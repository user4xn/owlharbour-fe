<script setup lang="ts">
import { useApiFetch } from '@/composables/axios';
import type { ApiResponse } from '@/interfaces/api';
import { ref, onMounted } from 'vue'

onMounted(() => {
  getStatistic()
})


function getStatistic() {
  try {
    const fetch = useApiFetch<ApiResponse>('/api/v1/dashboard/statistic')

    fetch.then((res: any) => {
      if(res.meta.code != 200) {
        console.error('failed fetching statistic api ', res.meta.message ?? "", res.meta.code)
      }

      // TOTAL SHIP
      cardItems.value[0].total = res.data.total_ship
      // TOTAL FRAUD
      cardItems.value[1].total = res.data.total_fraud
      // TOTAL CHECKIN
      cardItems.value[2].total = res.data.total_checkin
      // TOTAL CHECKOUT
      cardItems.value[3].total = res.data.total_checkout
    })

    
  } catch (error) {
    console.error('error on trying fetch', error)
  }   
}

const cardItems = ref([
  {
    icon: `<svg class="fill-primary dark:fill-white" fill="none" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" width="18px" height="18px" stroke="#dee4ee"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <rect x="133.565" y="150.261" width="244.87" height="22.261"></rect> <rect x="356.174" y="183.652" width="22.261" height="22.261"></rect> <rect x="133.565" y="183.652" width="22.261" height="22.261"></rect> <rect x="244.87" y="77.913" width="22.261" height="22.261"></rect> <rect x="278.261" y="77.913" width="22.261" height="22.261"></rect> <rect x="211.478" y="77.913" width="22.261" height="22.261"></rect> <rect x="178.087" y="77.913" width="22.261" height="22.261"></rect> <rect x="311.652" y="77.913" width="22.261" height="22.261"></rect> <path d="M459.458,479.918c-9.766,5.209-18.233,9.708-35.892,9.812l65.603-196.819c1.805-5.418-0.784-11.325-5.992-13.669 l-60.22-27.098V144.696c0-18.412-14.979-33.391-33.391-33.391H372.87V55.652c0-6.147-4.983-11.13-11.13-11.13H267.13V0H244.87 v44.522h-94.609c-6.147,0-11.13,4.983-11.13,11.13v55.652h-16.696c-18.412,0-33.391,14.979-33.391,33.391v107.441l-60.221,27.105 c-5.209,2.344-7.797,8.251-5.99,13.669l65.603,196.818c-17.66-0.104-26.126-4.602-35.892-9.811 c-10.933-5.83-23.325-12.439-46.977-12.439v22.261c18.087,0,26.621,4.551,36.501,9.821C53,505.391,65.391,512,89.044,512 c6.261,0,11.602-0.414,16.322-1.263c13.658-2.149,22.685-6.958,30.651-11.203c9.864-5.256,18.382-9.795,36.398-9.795 c18.087,0,26.62,4.551,36.501,9.821C219.848,505.391,232.24,512,255.892,512s36.044-6.609,46.977-12.439 c9.88-5.27,18.414-9.821,36.501-9.821c18.079,0,26.624,4.539,36.518,9.796c7.991,4.244,17.043,9.053,30.75,11.202 c4.718,0.85,10.057,1.263,16.318,1.263c23.652,0,36.044-6.609,46.977-12.439c9.881-5.27,18.414-9.821,36.501-9.821v-22.261 C482.783,467.478,470.391,474.087,459.458,479.918z M464.869,295.413l-7.981,23.943L267.13,232.169v-25.738L464.869,295.413z M161.391,66.783h189.217v44.522H161.391V66.783z M111.304,144.696c0-6.137,4.993-11.13,11.13-11.13h27.826h211.478h27.826 c6.137,0,11.13,4.993,11.13,11.13v97.429l-140.129-63.057c-2.905-1.308-6.231-1.309-9.135,0l-140.128,63.052V144.696z M47.132,295.413l197.738-88.981v25.738L55.112,319.356L47.132,295.413z M401.136,486.622c-5.407-1.759-9.886-4.132-14.806-6.745 c-10.938-5.811-23.337-12.398-46.961-12.398c-23.652,0-36.044,6.609-46.977,12.439c-9.882,5.27-18.414,9.822-36.501,9.822 s-26.621-4.551-36.501-9.822c-10.932-5.83-23.325-12.439-46.977-12.439c-23.576,0-35.949,6.593-46.865,12.409 c-4.884,2.602-9.332,4.965-14.689,6.719L62.192,340.6l182.677-83.932v132.897h22.261V256.668l182.677,83.933L401.136,486.622z"></path> </g> </g> </g> </g></svg>`,
    title: 'Total Ship',
    total: '0',
    growthRate: 0.43
  },
  {
    icon: `<svg class="fill-primary dark:fill-white" width="18px" height="18px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --> <title>ic_fluent_alert_on_24_regular</title> <desc>Created with Sketch.</desc> <g id="🔍-Product-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="ic_fluent_alert_on_24_regular" class="fill-primary dark:fill-white" fill-rule="nonzero"> <path d="M12,1.99622391 C16.0499218,1.99622391 19.3566662,5.19096617 19.4958079,9.24527692 L19.5,9.49622391 L19.5,13.5931945 L20.8800025,16.7492056 C20.949058,16.9071328 20.9847056,17.0776351 20.9847056,17.25 C20.9847056,17.9403559 20.4250615,18.5 19.7347056,18.5 L15,18.5014962 C15,20.1583504 13.6568542,21.5014962 12,21.5014962 C10.4023191,21.5014962 9.09633912,20.2525762 9.00509269,18.6777689 L8.99954674,18.4992239 L4.27486429,18.5 C4.10352557,18.5 3.93401618,18.4647755 3.7768624,18.3965139 C3.14366026,18.121475 2.85331154,17.3852002 3.1283504,16.7519981 L4.5,13.594148 L4.50000001,9.4961162 C4.50059668,5.34132493 7.85208744,1.99622391 12,1.99622391 Z M13.4995467,18.4992239 L10.5,18.5014962 C10.5,19.3299233 11.1715729,20.0014962 12,20.0014962 C12.7796961,20.0014962 13.4204487,19.4066081 13.4931334,18.6459562 L13.4995467,18.4992239 Z M12,3.49622391 C8.67983848,3.49622391 6.00047762,6.17047646 6,9.49622391 L6,13.905852 L4.65602014,17 L19.3525351,17 L18,13.9068055 L18.0001102,9.5090803 L17.9963601,9.28387824 C17.8853006,6.05040449 15.2415749,3.49622391 12,3.49622391 Z M21,8.25 L23,8.25 C23.4142136,8.25 23.75,8.58578644 23.75,9 C23.75,9.37969577 23.4678461,9.69349096 23.1017706,9.74315338 L23,9.75 L21,9.75 C20.5857864,9.75 20.25,9.41421356 20.25,9 C20.25,8.62030423 20.5321539,8.30650904 20.8982294,8.25684662 L21,8.25 Z M1,8.25 L3,8.25 C3.41421356,8.25 3.75,8.58578644 3.75,9 C3.75,9.37969577 3.46784612,9.69349096 3.10177056,9.74315338 L3,9.75 L1,9.75 C0.585786438,9.75 0.25,9.41421356 0.25,9 C0.25,8.62030423 0.532153882,8.30650904 0.898229443,8.25684662 L1,8.25 Z M22.6,2.55 C22.8259347,2.85124623 22.7909723,3.26714548 22.5337844,3.52699676 L22.45,3.6 L20.45,5.1 C20.1186292,5.34852814 19.6485281,5.28137085 19.4,4.95 C19.1740653,4.64875377 19.2090277,4.23285452 19.4662156,3.97300324 L19.55,3.9 L21.55,2.4 C21.8813708,2.15147186 22.3514719,2.21862915 22.6,2.55 Z M2.45,2.4 L4.45,3.9 C4.78137085,4.14852814 4.84852814,4.61862915 4.6,4.95 C4.35147186,5.28137085 3.88137085,5.34852814 3.55,5.1 L1.55,3.6 C1.21862915,3.35147186 1.15147186,2.88137085 1.4,2.55 C1.64852814,2.21862915 2.11862915,2.15147186 2.45,2.4 Z" id="🎨-Color"> </path> </g> </g> </g></svg>`,
    title: 'Total Fraud',
    total: '0',
    growthRate: 4.35
  },
  {
    icon: `<svg class="fill-primary dark:fill-white" fill="none" height="18px" width="18px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <path d="M437.016,74.985c-99.956-99.979-262.052-99.979-362.031,0s-99.979,262.075,0.002,362.033 c99.978,99.978,262.073,99.978,362.031-0.004C536.995,337.06,536.995,174.964,437.016,74.985z M406.848,406.844 c-83.299,83.318-218.377,83.318-301.693,0.002c-83.317-83.297-83.317-218.375,0-301.691s218.394-83.317,301.69-0.002 C490.162,188.471,490.162,323.549,406.848,406.844z"></path> <path d="M326.253,155.584L192.004,289.832v-76.497c0-11.782-9.551-21.333-21.333-21.333c-11.782,0-21.333,9.551-21.333,21.333 v128c0,0.007,0.001,0.014,0.001,0.021c0.001,0.696,0.037,1.391,0.105,2.084c0.031,0.318,0.091,0.627,0.136,0.94 c0.054,0.375,0.098,0.75,0.171,1.122c0.071,0.359,0.17,0.708,0.259,1.061c0.081,0.322,0.152,0.645,0.248,0.964 c0.105,0.346,0.234,0.679,0.356,1.017c0.114,0.319,0.219,0.64,0.349,0.954c0.131,0.315,0.284,0.617,0.429,0.924 c0.153,0.324,0.296,0.65,0.466,0.968c0.157,0.294,0.337,0.573,0.508,0.859c0.186,0.312,0.362,0.627,0.566,0.931 c0.211,0.315,0.445,0.611,0.671,0.913c0.191,0.254,0.367,0.515,0.571,0.763c0.443,0.54,0.91,1.059,1.403,1.552 c0.004,0.004,0.006,0.008,0.01,0.011c0.004,0.004,0.008,0.007,0.012,0.011c0.493,0.492,1.012,0.959,1.551,1.402 c0.248,0.204,0.51,0.381,0.764,0.571c0.302,0.226,0.598,0.46,0.912,0.67c0.304,0.204,0.621,0.38,0.933,0.567 c0.285,0.17,0.564,0.349,0.857,0.506c0.318,0.17,0.645,0.314,0.97,0.467c0.306,0.145,0.608,0.298,0.922,0.428 c0.315,0.13,0.637,0.236,0.957,0.35c0.337,0.121,0.669,0.25,1.013,0.354c0.32,0.097,0.646,0.168,0.969,0.249 c0.351,0.089,0.698,0.187,1.055,0.258c0.375,0.074,0.753,0.118,1.13,0.173c0.311,0.044,0.617,0.104,0.932,0.135 c0.7,0.069,1.403,0.106,2.105,0.106h128c11.782,0,21.333-9.551,21.333-21.333c0-11.782-9.551-21.333-21.333-21.333h-76.497 l134.248-134.248c8.331-8.331,8.331-21.839,0-30.17C348.091,147.253,334.584,147.253,326.253,155.584z"></path> </g> </g> </g> </g></svg>`,
    title: 'Check In ',
    total: '0',
    growthRate: 2.59
  },
  {
    icon: `<svg class="fill-primary dark:fill-white" fill="none" height="18px" width="18px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <path d="M437.014,74.983c-99.978-99.978-262.073-99.978-362.031,0.004c-99.978,99.954-99.978,262.05,0.002,362.029 c99.956,99.98,262.052,99.98,362.031,0S536.996,174.941,437.014,74.983z M406.846,406.846 c-83.317,83.317-218.394,83.317-301.69,0.002c-83.318-83.318-83.318-218.396-0.003-301.691 c83.299-83.318,218.377-83.318,301.693-0.002C490.163,188.452,490.163,323.529,406.846,406.846z"></path> <path d="M362.557,168.559c-0.031-0.315-0.09-0.621-0.135-0.932c-0.054-0.378-0.098-0.756-0.173-1.13 c-0.071-0.358-0.169-0.704-0.258-1.055c-0.081-0.324-0.152-0.649-0.249-0.969c-0.104-0.344-0.233-0.677-0.354-1.013 c-0.115-0.32-0.22-0.642-0.35-0.957c-0.13-0.314-0.283-0.616-0.428-0.922c-0.153-0.325-0.297-0.652-0.467-0.97 c-0.157-0.294-0.337-0.573-0.507-0.859c-0.186-0.312-0.362-0.627-0.565-0.931c-0.211-0.315-0.446-0.612-0.673-0.915 c-0.19-0.254-0.367-0.515-0.57-0.762c-0.443-0.539-0.909-1.058-1.402-1.551c-0.004-0.004-0.007-0.008-0.011-0.012 c-0.004-0.004-0.008-0.006-0.011-0.01c-0.494-0.493-1.012-0.96-1.552-1.403c-0.247-0.203-0.507-0.379-0.761-0.569 c-0.303-0.227-0.6-0.462-0.915-0.673c-0.304-0.203-0.619-0.379-0.93-0.565c-0.286-0.171-0.565-0.35-0.86-0.508 c-0.317-0.17-0.643-0.313-0.967-0.466c-0.308-0.145-0.61-0.299-0.925-0.43c-0.314-0.13-0.634-0.234-0.952-0.349 c-0.338-0.122-0.672-0.251-1.018-0.356c-0.318-0.096-0.641-0.167-0.963-0.248c-0.353-0.089-0.702-0.188-1.061-0.259 c-0.372-0.074-0.747-0.117-1.122-0.171c-0.314-0.045-0.623-0.105-0.941-0.136c-0.7-0.069-1.402-0.106-2.105-0.106h-128 c-11.782,0-21.333,9.551-21.333,21.333c0,11.782,9.551,21.333,21.333,21.333h76.497L155.578,326.246 c-8.331,8.331-8.331,21.839,0,30.17c8.331,8.331,21.839,8.331,30.17,0l134.248-134.248v76.497 c0,11.782,9.551,21.333,21.333,21.333c11.782,0,21.333-9.551,21.333-21.333V170.666 C362.663,169.963,362.626,169.26,362.557,168.559z"></path> </g> </g> </g> </g></svg>`,
    title: 'Check Out',
    total: '0',
    growthRate: -0.95
  }
])
</script>

<template>
  <!-- Card Item Start -->
  <div
    v-for="(item, index) in cardItems"
    :key="index"
    class="rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default dark:border-strokedark dark:bg-boxdark"
  >
    <div
      class="flex h-11.5 w-11.5 items-center justify-center rounded-full bg-meta-2 dark:bg-meta-4"
      v-html="item.icon"
    ></div>

    <div class="mt-4 flex items-end justify-between">
      <div>
        <h4 class="text-title-md font-bold text-black dark:text-white">{{ item.total }}</h4>
        <span class="text-sm font-medium">{{ item.title }}</span>
      </div>

      <span
        class="flex items-center gap-1 text-sm font-medium"
        :class="{ 'text-meta-3': item.growthRate > 0, 'text-meta-5': item.growthRate < 0 }"
      >
        {{ item.growthRate }}%
        <svg
          v-if="item.growthRate > 0"
          class="fill-meta-3"
          width="10"
          height="11"
          viewBox="0 0 10 11"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4.35716 2.47737L0.908974 5.82987L5.0443e-07 4.94612L5 0.0848689L10 4.94612L9.09103 5.82987L5.64284 2.47737L5.64284 10.0849L4.35716 10.0849L4.35716 2.47737Z"
            fill=""
          />
        </svg>

        <svg
          v-if="item.growthRate < 0"
          class="fill-meta-5"
          width="10"
          height="11"
          viewBox="0 0 10 11"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.64284 7.69237L9.09102 4.33987L10 5.22362L5 10.0849L-8.98488e-07 5.22362L0.908973 4.33987L4.35716 7.69237L4.35716 0.0848701L5.64284 0.0848704L5.64284 7.69237Z"
            fill=""
          />
        </svg>
      </span>
    </div>
  </div>
  <!-- Card Item End -->
</template>
